const errors = require("./errors")

function parsePageData(body) {
  const snip = body.match(/var ytInitialPlayerResponse = {.+?};/gm)
  if (snip.length == 0) {
    throw new errors.YTScraperMissingData()
  }
  const rawJson = snip[0].match(/\{.+?\};/g)[0].slice(0, -1)
  return JSON.parse(rawJson)
}
exports.parsePageData = parsePageData